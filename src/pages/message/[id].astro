---
import Layout from "../../layouts/Layout.astro";
import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient()

const { id } = Astro.params

const message = await prisma.frontPageMessage.findUnique({
    where: {
        id: id
    }
})

if (!message) {
    return Astro.redirect("/notfound")
}
---

<Layout>
    <div style="margin: 1rem; padding: 1rem; width: fit-content; background: #fff1;">
        <h1 class="mono" style="color: #a57549; font-size: 1.75rem;">
            {message.id.split("").map(c => c.match(/\d/) ? <span style="color: orangered">{c}</span> : c)}
        </h1>
        <p style="opacity: 0.5;">
            {message.createdAt.toLocaleString("en-GB", {day: "2-digit", month: "2-digit", year: "numeric", hour: "2-digit", minute: "2-digit"})}
        </p>
        <p>
            {message.message}
        </p>
    </div>
</Layout>
